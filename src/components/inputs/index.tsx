import { forwardRef, useState } from "react";
import "./inputs.scss";

export const QtyInput = forwardRef(
  (
    props: React.HTMLAttributes<HTMLInputElement> & { inStock: number },
    ref: React.ForwardedRef<HTMLInputElement>
  ) => {
    const [inputValue, setInputValue] = useState(1);
    const { inStock, ...other } = props;
    return (
      <div className="qty-input">
        <span
          onClick={() => {
            if (inputValue > 1) {
              setInputValue((prev) => prev - 1);
            }
          }}
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clipPath="url(#clip0_11_13)">
              <path
                d="M20.0355 14.998C20.1621 14.9984 20.2876 14.9738 20.4047 14.9255C20.5218 14.8773 20.6282 14.8064 20.7179 14.7169C20.8075 14.6274 20.8785 14.5211 20.927 14.4041C20.9754 14.2871 21.0002 14.1616 21 14.035V10.9645C21.0004 10.8377 20.9757 10.7121 20.9274 10.5949C20.8791 10.4777 20.808 10.3713 20.7184 10.2816C20.6288 10.192 20.5223 10.1209 20.4051 10.0726C20.2879 10.0243 20.1623 9.99961 20.0355 10H3.9645C3.83773 9.99961 3.71214 10.0243 3.59494 10.0726C3.47774 10.1209 3.37126 10.192 3.28162 10.2816C3.19198 10.3713 3.12095 10.4777 3.07262 10.5949C3.02429 10.7121 2.99961 10.8377 3 10.9645V14.0335C3 14.569 3.4305 14.998 3.9645 14.998H20.0355V14.998Z"
                fill="#FF7E1B"
              />
            </g>
            <defs>
              <clipPath id="clip0_11_13">
                <rect
                  width="18"
                  height="6"
                  fill="white"
                  transform="translate(3 10)"
                />
              </clipPath>
            </defs>
          </svg>
        </span>
        <input
          type="text"
          value={inputValue}
          name="qty"
          {...other}
          readOnly
          ref={ref}
        />
        <span
          onClick={() => {
            if (inputValue < inStock) {
              setInputValue((prev) => prev + 1);
            }
          }}
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clipPath="url(#clip0_11_12)">
              <path
                d="M21 13.5345V10.4655C21.0004 10.3387 20.9757 10.2131 20.9274 10.096C20.8791 9.97875 20.808 9.87227 20.7184 9.78263C20.6288 9.69299 20.5223 9.62196 20.4051 9.57363C20.2879 9.5253 20.1623 9.50062 20.0355 9.50102H14.5005V3.96452C14.5009 3.83749 14.4761 3.71165 14.4276 3.59425C14.3791 3.47686 14.3078 3.37024 14.2179 3.28056C14.1279 3.19088 14.0211 3.11991 13.9035 3.07176C13.786 3.02361 13.66 2.99923 13.533 3.00002H10.4655C10.3387 2.99962 10.2131 3.0243 10.096 3.07263C9.97876 3.12096 9.87227 3.19199 9.78263 3.28163C9.69299 3.37127 9.62196 3.47775 9.57363 3.59495C9.5253 3.71215 9.50062 3.83775 9.50102 3.96452V9.49952H3.96452C3.83749 9.49912 3.71165 9.52389 3.59425 9.57241C3.47686 9.62093 3.37024 9.69223 3.28056 9.78219C3.19088 9.87215 3.11991 9.97899 3.07176 10.0965C3.02361 10.2141 2.99923 10.34 3.00002 10.467V13.536C3.00002 14.07 3.43052 14.5005 3.96452 14.5005H9.49952V20.037C9.49952 20.571 9.93152 21.0015 10.4655 21.0015H13.5345C13.6613 21.0019 13.7869 20.9772 13.9041 20.9289C14.0213 20.8806 14.1278 20.8095 14.2174 20.7199C14.307 20.6303 14.3781 20.5238 14.4264 20.4066C14.4747 20.2894 14.4994 20.1638 14.499 20.037V14.502H20.0355C20.1627 14.5024 20.2886 14.4776 20.4061 14.429C20.5236 14.3804 20.6303 14.3089 20.72 14.2188C20.8097 14.1287 20.8806 14.0217 20.9287 13.904C20.9768 13.7863 21.001 13.6602 21 13.533V13.5345Z"
                fill="#FF7E1B"
              />
            </g>
            <defs>
              <clipPath id="clip0_11_12">
                <rect
                  width="18"
                  height="18"
                  fill="white"
                  transform="translate(3 3)"
                />
              </clipPath>
            </defs>
          </svg>
        </span>
      </div>
    );
  }
);
